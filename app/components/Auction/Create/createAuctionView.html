<m param="{route}">
  <div class="auction-add-page" ng-open="formLabels('createAuctionForm')" >
    <h1>{{'texts.auction.create_auction' | i18next}}</h1>
    <style type="text/css">
      #map {
        height: 450px;
        width: 100%;
        border: 1px solid #e6e6f1;
      }
      #distance{
        text-align: center;
        margin: 10px 0;
      }
    </style>
    <script>
      $(function () {
          $('.datetimepicker1').datetimepicker({
            format: 'YYYY/MM/DD HH:mm'
          });
      });
      $(function () {
          $('.datetimepickerDelivery').datetimepicker({
              format: 'YYYY/MM/DD HH:mm'
          });
      });
    </script>
    <div class="form-group half half-center">
      <div class="select_auction_template">
        <span>{{'texts.auction.select_template_label' | i18next}}</span>
      </div>
      <select class="form-control my-input" ng-model="selectedTemplate" ng-change="selectTemplate(selectedTemplate)">
        <option value="0" selected="selected" hidden>{{'texts.auction.no_template' | i18next}}</option>
        <option ng-repeat="template in templates" value="{{template.ID}}">{{template.name}}</option>
      </select>
    </div>
    <div class="auction_template_divider"></div>
    <form name="createAuctionForm" novalidate>
      <div class="form-group full">
        <span class="glyphicon glyphicon-info-sign"></span>
        <span>{{'texts.auction.info' | i18next}}</span>
      </div>
      <div class="form-group half">
        <input id="geoCompleteFrom" class="form-control my-input" placeholder="{{'texts.auction.from' | i18next}}" ng-model="auction.address_from" />
      </div>

      <div class="form-group half">
        <input id="geoCompleteTo" class="form-control my-input" placeholder="{{'texts.auction.to' | i18next}}" ng-model="auction.address_to" />
      </div>
      {{bindGeoEvents()}}
      <div class="form-group text-center">
        <div class="my-button easy-button big-button" ng-click="showMap()">{{'texts.show_hidden_map' | i18next}}</div>
      </div>
      <div class="map-wrapper">
        <div id="distance" style="display:none"></div>
        <div id="map" style="display:none"></div>
      </div>
      <div class="form-group half">
        <input type="text" name="load_note" id="load_note" class="form-control my-input" placeholder="{{'texts.auction.load_note' | i18next}}" ng-model="auction.load_note"
               ng-class="{'input-error' : createAuctionForm.load_note.$invalid && (!createAuctionForm.load_note.$pristine || clicked)}"
               required />
      </div>
      <div class="form-group half">
        <input type="text" name="unload_note" id="unload_note" class="form-control my-input" placeholder="{{'texts.auction.unload_note' | i18next}}" ng-model="auction.unload_note"
               ng-class="{'input-error' : createAuctionForm.unload_note.$invalid && (!createAuctionForm.unload_note.$pristine || clicked)}"
               required />
      </div>
      <div class="form-group half">
        <input type="text" name="price" id="price" class="form-control my-input" placeholder="{{'texts.auction.price' | i18next}}" ng-model="auction.price"
               ng-class="{'input-error' : createAuctionForm.price.$invalid && (!createAuctionForm.price.$pristine || clicked)}"
               required />
      </div>
      <div class="form-group half">
        <div class='input-group datetimepickerDelivery'>
          <input type='text' name="delivery" class="form-control my-input" onkeydown="return false"  id="delivery" placeholder="{{'texts.auction.delivery' | i18next}}"
                 ng-class="{'input-error' : createAuctionForm.delivery.$invalid && (!createAuctionForm.delivery.$pristine || clicked)}"
                 required/>
          <span class="input-group-addon">
              <span class="glyphicon glyphicon-calendar"></span>
          </span>
        </div>
      </div>
      <div class="form-group"></div>
      <h3>{{'texts.about_freight' | i18next}}</h3>
      <div class="form-group half">
        <input type="text" name="freight_description" id="freight_description" class="form-control my-input" placeholder="{{'texts.auction.freight_description' | i18next}}" ng-model="auction.freight_description"
               ng-class="{'input-error' : createAuctionForm.freight_description.$invalid && (!createAuctionForm.freight_description.$pristine || clicked)}"
               required />
      </div>
      <div class="form-group half">
        <select class="form-control my-input" ng-model="auction.freight_type" name="freight_type" id="freight_type"
                ng-class="{'input-error' : createAuctionForm.freight_type.$invalid && (!createAuctionForm.freight_type.$pristine || clicked)}" required>
          <option value="" disabled selected>{{'texts.auction.freight_type.label' | i18next}}</option>
          <option value="1">{{'texts.auction.freight_type.1' | i18next}}</option>
          <option value="2">{{'texts.auction.freight_type.2' | i18next}}</option>
          <option value="3">{{'texts.auction.freight_type.3' | i18next}}</option>
          <option value="4">{{'texts.auction.freight_type.4' | i18next}}</option>
          <option value="5">{{'texts.auction.freight_type.5' | i18next}}</option>
          <option value="6">{{'texts.auction.freight_type.6' | i18next}}</option>
          <option value="7">{{'texts.auction.freight_type.7' | i18next}}</option>
          <option value="8">{{'texts.auction.freight_type.8' | i18next}}</option>
        </select>
      </div>
      <div class="form-group half">
        <input type="text" name="freight_size" id="freight_size" class="form-control my-input" placeholder="{{'texts.auction.freight_size' | i18next}}" ng-model="auction.freight_size"
               ng-class="{'input-error' : createAuctionForm.freight_size.$invalid && (!createAuctionForm.freight_size.$pristine || clicked)}"
               required />
      </div>
      <div class="form-group half">
        <input type="text" name="freight_weight" id="freight_weight" class="form-control my-input" placeholder="{{'texts.auction.freight_weight' | i18next}}" ng-model="auction.freight_weight"
               ng-class="{'input-error' : createAuctionForm.freight_weight.$invalid && (!createAuctionForm.freight_weight.$pristine || clicked)}"
               required />
      </div>
      <div class="form-group"></div>
      <h3>{{'texts.auction.auction_list' | i18next}}</h3>
      <div class="form-group half">
        <div class='input-group datetimepicker1'>
          <input type='text' name="end_auction" class="form-control my-input" onkeydown="return false"  id="end_auction" placeholder="{{'texts.auction.end_auction' | i18next}}"
          ng-class="{'input-error' : createAuctionForm.end_auction.$invalid && (!createAuctionForm.end_auction.$pristine || clicked)}"
          required/>
          <span class="input-group-addon">
              <span class="glyphicon glyphicon-calendar"></span>
          </span>
        </div>
      </div>
      <div class="form-group half"></div>
      <div class="form-group half"></div>
      <div class="form-group half"></div>
      <div class="form-group half text-center">
        <div class="my-button easy-button big-button" ng-click="createTemplate()">{{'texts.create_template_button' | i18next}}</div>
      </div>
      <div class="form-group half text-center">
        <div class="my-button important-button big-button" ng-click="createAuction()">{{'texts.auction.create_auction' | i18next}}</div>
      </div>
    </form>
  </div>
</m>

<script type="text/ng-template" id="modal_create_template" class="modal-content">
  <div class="modal-header">
    <h2>{{'texts.create_template' | i18next}}</h2>
  </div>

  <div class="modal-body">
    <div class="form-group half no-margin-element">
      <span>{{'texts.auction.template_name' | i18next}}</span>
      <input type='text' ng-model="template_name" name="template_name" class="form-control my-input" placeholder="{{'texts.auction.template_name' | i18next}}"
             ng-class="template_name.length ? null : 'input-error'" />
    </div>
  </div>
  <div class="modal-footer">
    <div class="my-button normal-button" ng-click="ok(template_name)">{{'texts.ok' | i18next}}</div>
    <div class="my-button easy-button" ng-click="cancel()">{{'texts.cancel' | i18next}}</div>
  </div>
</script>